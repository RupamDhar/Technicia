<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Technicia - Book Slot</title>
    <link rel="stylesheet" href="/CSS Files/bookSlot.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
        integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="icon" href="/Media/balajiIcon.png">
    <!-- Poppins font -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap"
        rel="stylesheet">
</head>

<body>

    <header>
        <!-- title bar -->
        <div class="titlebar">
            <div id="title">TECHNICIA</div>
            <div class="navbar">
                <a id="homePage" target="_blank" class="navbarItems">HOME</a>
                <a id="visitShop" target="_blank" class="navbarItems">VISIT SHOP</a>
            </div>
        </div>
    </header>

    <main>
        <!-- slot booking -->
        <div class="slotBookingContainer">
            <div class="slotBooking">
                <!-- day select -->
                <div id="datebarTxt">Select a date to book your slot:</div>
                <div class="dateBar">
                    <div class="currentDay">
                        <div id="day"></div>
                        <div id="date"></div>
                        <div id="month"></div>
                    </div>
                    <div class="currentDay">
                        <div id="day"></div>
                        <div id="date"></div>
                        <div id="month"></div>
                    </div>
                    <div class="currentDay">
                        <div id="day"></div>
                        <div id="date"></div>
                        <div id="month"></div>
                    </div>
                    <div class="currentDay">
                        <div id="day"></div>
                        <div id="date"></div>
                        <div id="month"></div>
                    </div>
                </div>

                <!-- user info -->
                <div class="time inputSection">
                    <span id="timeTxt">Slot Time</span>
                    <input type="time" id="timeInput" placeholder="Enter time">
                    <div id="timeHint">Booking available only from 1PM to 4PM everyday. All other timings will be
                        ignored. <br>Each booking will be of 1 hour.</div>
                </div>

                <div class="username inputSection">
                    <span id="nameTxt" style="margin-right: 36px;">Name</span>
                    <input type="text" id="nameInput">
                </div>

                <div class="address inputSection">
                    <span id="addressTxt " style="margin-right: 11px;">Address</span>
                    <input type="text" id="addressInput">
                </div>

                <div class="phoneNumber inputSection">
                    <span id="phnNoTxt" style="margin-right: -5px;">Phone No</span>
                    <input type="text" id="phnNoInput">
                </div>

                <button id="bookSlotBtn">Book Slot</button>
                <div id="bookHint">Maximum of 3 bookings per day. Check booked times below according to date. </div>

                <!-- available slot display -->
                <div class="slotAvail">
                    <div id="bookedSlotTxt">Booked time: <%=bookedSlots%>
                    </div>
                    <div id="bookedSlots"></div>
                </div>
            </div>
        </div>

    </main>

    <footer>
        <div class="footer">
            <div class="contactNo">Contact No.: +00-0123456789 / +00-9876543210</div>
            <div class="email">E-mail: examplemail@gmail.com</div>
        </div>
    </footer>

    <script src="/JavaScript Files/dateBar.js"></script>
    <script src="/JavaScript Files/bookSlot.js"></script>
    <!-- dynamically loading script -->
    <script>
        let bookDays = Array.from(document.getElementsByClassName("currentDay"));
        let index = '<%=index%>';
        bookDays[index].style.color = 'black';
        bookDays[index].style.backgroundColor = 'white';

        //BOOKING SLOT by passing query
        let bookBtn = document.getElementById('bookSlotBtn');
        bookBtn.addEventListener("click", () => 
        {
            let time = document.getElementById('timeInput').value;
            let bookDate = '<%=day%>';  
            let name = document.getElementById('nameInput').value;
            let address = document.getElementById('addressInput').value;
            let phoneNo = document.getElementById('phnNoInput').value;

            let query = `time=${time}&date=${bookDate}&name=${name}&address=${address}&phoneNo=${phoneNo}`;
            window.location.href = `?${query}`;
            console.log(query);
        });
    </script>
</body>

</html>